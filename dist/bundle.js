!function(modules){var installedModules={};function __webpack_require__(moduleId){if(installedModules[moduleId])return installedModules[moduleId].exports;var module=installedModules[moduleId]={i:moduleId,l:!1,exports:{}};return modules[moduleId].call(module.exports,module,module.exports,__webpack_require__),module.l=!0,module.exports}__webpack_require__.m=modules,__webpack_require__.c=installedModules,__webpack_require__.d=function(exports,name,getter){__webpack_require__.o(exports,name)||Object.defineProperty(exports,name,{configurable:!1,enumerable:!0,get:getter})},__webpack_require__.n=function(module){var getter=module&&module.__esModule?function(){return module.default}:function(){return module};return __webpack_require__.d(getter,"a",getter),getter},__webpack_require__.o=function(object,property){return Object.prototype.hasOwnProperty.call(object,property)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=17)}([function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _render=__webpack_require__(1),_ClassicMaze2=_interopRequireDefault(__webpack_require__(40)),_PacmanEntity2=_interopRequireDefault(__webpack_require__(41)),_RedPhantom2=_interopRequireDefault(__webpack_require__(8)),_PinkPhantom2=_interopRequireDefault(__webpack_require__(14)),_BluePhantom2=_interopRequireDefault(__webpack_require__(15)),_OrangePhantom2=_interopRequireDefault(__webpack_require__(16));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var mainGear=new _render.Gear({load:function(){return{tiles:_render.Loader.loadTextureFromUrl(window.location.origin+"/assets/tileset.png")}},init:function(){var _this=this;this.paused=!1,this.pausedTime=0,this.acumulateTime=0,this.lives=3,this.tileset=this.tiles.split(1,8)[0],Pacman.GLOBALS.tileset=this.tileset,Pacman.GLOBALS.maze=_ClassicMaze2.default,this.sb=new _render.SpriteBatch(Pacman.context),this.gearStack.init(),this.pauseGame(5),this.$subscribe("pacmanDead",function(){return _this.onPacmanDead()})},update:function(){if(this.paused)return this.acumulateTime+=Pacman.deltaTime,void(this.acumulateTime>=this.pausedTime&&(this.paused=!1,this.acumulateTime=0));this.gearStack.update()},render:function(){Pacman.context.fillRect(0,0,224,288),this.sb.begin(),_ClassicMaze2.default.render(this.sb),this.gearStack.render(this.sb);for(var i=0;i<this.lives;i++)this.sb.drawTexture(this.tileset[1],16+16*i,276);this.sb.drawText("HIGH SCORE","white","8px Verdana","center",108,8),this.sb.drawText(Pacman.GLOBALS.POINTS,"white","8px Verdana","center",108,16),this.sb.end()},methods:{pauseGame:function(time){this.paused=!0,this.pausedTime=time,this.acumulateTime=0},onPacmanDead:function(){_PacmanEntity2.default.softReset(),_RedPhantom2.default.softReset(),_PinkPhantom2.default.softReset(),_BluePhantom2.default.softReset(),_OrangePhantom2.default.softReset(),this.lives--,this.pauseGame(5)}},gears:{PacmanEntity:_PacmanEntity2.default,RedPhantom:_RedPhantom2.default,PinkPhantom:_PinkPhantom2.default,BluePhantom:_BluePhantom2.default,OrangePhantom:_OrangePhantom2.default}}),Pacman=new _render.Game({container_id:"pacman",width:224,height:288},mainGear);Pacman.GLOBALS={UP:0,RIGHT:1,DOWN:2,LEFT:3,PacmanEntity:_PacmanEntity2.default,POINTS:0},exports.default=Pacman},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _core=__webpack_require__(18);Object.defineProperty(exports,"Game",{enumerable:!0,get:function(){return _core.Game}}),Object.defineProperty(exports,"Gear",{enumerable:!0,get:function(){return _core.Gear}});var _graphics=__webpack_require__(29);Object.defineProperty(exports,"TextureRegion",{enumerable:!0,get:function(){return _graphics.TextureRegion}}),Object.defineProperty(exports,"SpriteBatch",{enumerable:!0,get:function(){return _graphics.SpriteBatch}}),Object.defineProperty(exports,"Animation",{enumerable:!0,get:function(){return _graphics.Animation}}),Object.defineProperty(exports,"Camera",{enumerable:!0,get:function(){return _graphics.Camera}});var _maths=__webpack_require__(12);Object.defineProperty(exports,"M3",{enumerable:!0,get:function(){return _maths.M3}}),Object.defineProperty(exports,"Polygon",{enumerable:!0,get:function(){return _maths.Polygon}}),Object.defineProperty(exports,"Rectangle",{enumerable:!0,get:function(){return _maths.Rectangle}}),Object.defineProperty(exports,"Vector2D",{enumerable:!0,get:function(){return _maths.Vector2D}});var _assetLoader=__webpack_require__(5);Object.defineProperty(exports,"Loader",{enumerable:!0,get:function(){return _assetLoader.Loader}});var _input=__webpack_require__(35);Object.defineProperty(exports,"Keyboard",{enumerable:!0,get:function(){return _input.KeyboardInputManager}}),Object.defineProperty(exports,"Mouse",{enumerable:!0,get:function(){return _input.MouseInputManager}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _EventEmiter=__webpack_require__(22);Object.defineProperty(exports,"EventEmiter",{enumerable:!0,get:function(){return(obj=_EventEmiter,obj&&obj.__esModule?obj:{default:obj}).default;var obj}});var AssetCache=new Map;exports.AssetCache=AssetCache},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var M3={identity:function(){return[1,0,0,0,1,0,0,0,1]},multiply:function(a,b){var a00=a[0],a01=a[1],a02=a[2],a10=a[3],a11=a[4],a12=a[5],a20=a[6],a21=a[7],a22=a[8],b00=b[0],b01=b[1],b02=b[2],b10=b[3],b11=b[4],b12=b[5],b20=b[6],b21=b[7],b22=b[8];return[b00*a00+b01*a10+b02*a20,b00*a01+b01*a11+b02*a21,b00*a02+b01*a12+b02*a22,b10*a00+b11*a10+b12*a20,b10*a01+b11*a11+b12*a21,b10*a02+b11*a12+b12*a22,b20*a00+b21*a10+b22*a20,b20*a01+b21*a11+b22*a21,b20*a02+b21*a12+b22*a22]},translate:function(m,tx,ty){var translation=[1,0,0,0,1,0,tx,ty,1];return this.multiply(m,translation)},rotate:function(m,angle){var rotation=[Math.cos(angle),Math.sin(angle),0,-Math.sin(angle),Math.cos(angle),0,0,0,1];return this.multiply(m,rotation)},scale:function(m,sx,sy){var scalation=[sx,0,0,0,sy,0,0,0,1];return this.multiply(m,scalation)},toCanvas2dMatrix:function(m){return[m[0],m[1],m[3],m[4],m[6],m[7]]}};exports.default=M3},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _render=__webpack_require__(1),_Pacman2=_interopRequireDefault(__webpack_require__(0)),_Maze2=_interopRequireDefault(__webpack_require__(7));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var Phantom=function Phantom(sprite,patrolPoint,spawnPoint,onHuntMode,onInJail){return new _render.Gear({init:function(){this.paused=!1,this.pausedTime=0,this.mode="Patrol",this.prevMode="Patrol",this.sprite=sprite,this.timeRefernce=0,this.acumulateTime=0,this.spawnPoint=spawnPoint;var spawn=this.spawnPoint();this.inJail=!0,this.onInJail=onInJail,this.x=spawn.x,this.y=spawn.y,this.xRounded=spawn.x,this.yRounded=spawn.y,this.patrolPoint=patrolPoint,this.v=3.5,this.direction=_Pacman2.default.GLOBALS.LEFT,this.nextDirection=_Pacman2.default.GLOBALS.LEFT,this.nextDirectionCalculated=!1,this.onHuntModeCb=onHuntMode},update:function(){var _this=this;if(this.paused)return this.acumulateTime+=_Pacman2.default.deltaTime,void(this.acumulateTime>=this.pausedTime&&(this.paused=!1,this.acumulateTime=0));if(this.inJail){if(this.onInJail(this),this.inJail)return;this.$subscribe("enterPanic",function(){_this.prevMode=_this.mode,_this.mode="Panic",_this.acumulateTime=0})}this.x,this.y;var movement=this.v*_Pacman2.default.deltaTime;movement>.1&&(movement=.1),this.direction==_Pacman2.default.GLOBALS.UP?this.y-=movement:this.direction==_Pacman2.default.GLOBALS.RIGHT?this.x+=movement:this.direction==_Pacman2.default.GLOBALS.DOWN?this.y+=movement:this.direction==_Pacman2.default.GLOBALS.LEFT&&(this.x-=movement),this.fixPosition(),this.xRounded=Math.round(10*this.x)/10,this.yRounded=Math.round(10*this.y)/10,this.changeDirection(),this.setMode()},render:function(sb){sb.drawTexture(_Pacman2.default.GLOBALS.tileset[this.sprite],8*this.xRounded,8*this.yRounded)},methods:{calculateDirection:function(targetPoint,_ref){var i=_ref.i,j=_ref.j,allDirections=_Pacman2.default.GLOBALS.maze.intersections.get(JSON.stringify([i,j])),index=allDirections.indexOf((this.direction+2)%4),directions=-1!=index?allDirections.filter(function(e){return e!=allDirections[index]}):allDirections;if(1==directions.lenght)this.nextDirection=directions[0],this.nextDirectionCalculated=!0;else{for(var min=Number.MAX_VALUE,targetDirection=0,n=0;n<directions.length;n++){var direction=directions[n];if(direction==_Pacman2.default.GLOBALS.UP){var distance=new _render.Vector2D(Math.floor(this.x),Math.floor(this.y)-1,targetPoint.x,targetPoint.y).magnitude();distance<min&&(min=distance,targetDirection=direction)}else if(direction==_Pacman2.default.GLOBALS.RIGHT){var _distance=new _render.Vector2D(Math.floor(this.x)+1,Math.floor(this.y),targetPoint.x,targetPoint.y).magnitude();_distance<min&&(min=_distance,targetDirection=direction)}else if(direction==_Pacman2.default.GLOBALS.DOWN){var _distance2=new _render.Vector2D(Math.floor(this.x),Math.floor(this.y)+1,targetPoint.x,targetPoint.y).magnitude();_distance2<min&&(min=_distance2,targetDirection=direction)}else if(direction==_Pacman2.default.GLOBALS.LEFT){var _distance3=new _render.Vector2D(Math.floor(this.x)-1,Math.floor(this.y),targetPoint.x,targetPoint.y).magnitude();_distance3<min&&(min=_distance3,targetDirection=direction)}}this.nextDirection=targetDirection,this.nextDirectionCalculated=!0}},changeDirection:function(){var _getTile=this.getTile(),i=_getTile.i,j=_getTile.j;_Pacman2.default.GLOBALS.maze.intersections.has(JSON.stringify([i,j]))?(this.nextDirectionCalculated||this["on"+this.mode+"Mode"]({i:i,j:j}),this.nextDirection==_Pacman2.default.GLOBALS.UP&&_Pacman2.default.GLOBALS.maze.layout[i-1][j]>0&&this.xRounded%1<=.1?(this.x=Math.floor(this.x),this.direction=this.nextDirection):this.nextDirection==_Pacman2.default.GLOBALS.RIGHT&&_Pacman2.default.GLOBALS.maze.layout[i][j+1]>0&&this.yRounded%1<=.1?(this.y=Math.floor(this.y),this.direction=this.nextDirection):this.nextDirection==_Pacman2.default.GLOBALS.DOWN&&_Pacman2.default.GLOBALS.maze.layout[i+1][j]>0&&this.xRounded%1<=.1?(this.x=Math.floor(this.x),this.direction=this.nextDirection):this.nextDirection==_Pacman2.default.GLOBALS.LEFT&&_Pacman2.default.GLOBALS.maze.layout[i][j-1]>0&&this.yRounded%1<=.1&&(this.y=Math.floor(this.y),this.direction=this.nextDirection)):this.nextDirectionCalculated=!1},fixPosition:function(){var _getTile2=this.getTile(),i=_getTile2.i,j=_getTile2.j;this.direction==_Pacman2.default.GLOBALS.UP&&_Pacman2.default.GLOBALS.maze.layout[i][j]==_Maze2.default.BLOCKS.WALL?this.y=Math.ceil(this.y):this.direction==_Pacman2.default.GLOBALS.RIGHT&&_Pacman2.default.GLOBALS.maze.layout[i][j+1]==_Maze2.default.BLOCKS.WALL?this.x=Math.floor(this.x):this.direction==_Pacman2.default.GLOBALS.DOWN&&_Pacman2.default.GLOBALS.maze.layout[i+1][j]==_Maze2.default.BLOCKS.WALL?this.y=Math.floor(this.y):this.direction==_Pacman2.default.GLOBALS.LEFT&&_Pacman2.default.GLOBALS.maze.layout[i][j]==_Maze2.default.BLOCKS.WALL&&(this.x=Math.ceil(this.x)),this.x<-1&&(this.x=28),this.x>28&&(this.x=-1)},getTile:function(){return{i:Math.floor(this.y-3),j:Math.floor(this.x)}},onPatrolMode:function(_ref2){var i=_ref2.i,j=_ref2.j;this.calculateDirection(this.patrolPoint,{i:i,j:j})},onPanicMode:function(_ref3){var i=_ref3.i,j=_ref3.j,allDirections=_Pacman2.default.GLOBALS.maze.intersections.get(JSON.stringify([i,j]));this.nextDirection=allDirections[Math.floor(Math.random()*allDirections.length)],this.nextDirectionCalculated=!0},onHuntMode:function(_ref4){var i=_ref4.i,j=_ref4.j;this.onHuntModeCb(this,{i:i,j:j})},setMode:function(){"Panic"==this.mode&&(this.acumulateTime+=_Pacman2.default.deltaTime,this.v=1.5,this.acumulateTime>=Phantom.PANIC_TIME&&(this.acumulateTime=0,this.mode=this.prevMode,this.v=3.5)),"Hunt"==this.mode&&Phantom.TIMES[this.timeRefernce]<0||(this.acumulateTime+=_Pacman2.default.deltaTime,this.acumulateTime>=Phantom.TIMES[this.timeRefernce]&&(this.acumulateTime=0,this.timeRefernce++,this.mode="Patrol"==this.mode?"Hunt":"Patrol"))},softReset:function(){var spawn=this.spawnPoint();this.x=spawn.x,this.y=spawn.y,this.xRounded=spawn.x,this.yRounded=spawn.y,this.v=3.5,this.direction=_Pacman2.default.GLOBALS.LEFT,this.nextDirection=_Pacman2.default.GLOBALS.LEFT,this.nextDirectionCalculated=!1,this.inJail=!0},onPacmanCollision:function(){"Panic"==this.mode?(this.acumulateTime=0,this.mode=this.prevMode,_Pacman2.default.GLOBALS.POINTS+=100,this.softReset(),this.pausePhantom(Phantom.AFTER_EAT_PAUSE)):this.$emit("pacmanDead")},pausePhantom:function(time){this.paused=!0,this.pausedTime=time,this.acumulateTime=0}}})};Phantom.TIMES=[7,20,7,20,5,20,5,-1],Phantom.PANIC_TIME=10,Phantom.AFTER_EAT_PAUSE=3,exports.default=Phantom},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Loader=void 0;var obj,_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},textureLoaders=_interopRequireWildcard(__webpack_require__(20)),soundLoaders=_interopRequireWildcard(__webpack_require__(23)),_AssetLoader=__webpack_require__(25);function _interopRequireWildcard(obj){if(obj&&obj.__esModule)return obj;var newObj={};if(null!=obj)for(var key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(newObj[key]=obj[key]);return newObj.default=obj,newObj}var Loader=new((obj=_AssetLoader)&&obj.__esModule?obj:{default:obj}).default(_extends({},textureLoaders,soundLoaders));exports.Loader=Loader},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var obj,_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_Mat=__webpack_require__(3),_Mat2=(obj=_Mat)&&obj.__esModule?obj:{default:obj};var Vector2D=function(){function Vector2D(x,y){var xo=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,yo=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Vector2D),this.x=x-xo,this.y=y-yo}return _createClass(Vector2D,[{key:"transform",value:function(tranformationMatrix){this.x=this.x*tranformationMatrix[0]+(this.y*tranformationMatrix[3]+tranformationMatrix[6]),this.y=this.x*tranformationMatrix[1]+(this.y*tranformationMatrix[4]+tranformationMatrix[7])}},{key:"translate",value:function(vector){this.x+=vector.x,this.y+=vector.y}},{key:"setPosition",value:function(x,y){this.x=x,this.y=y}},{key:"rotate",value:function(rotation){var matrix=_Mat2.default.identity();matrix=_Mat2.default.rotate(matrix,rotation*(Math.PI/180)),this.transform(matrix)}},{key:"sacale",value:function(scaleX,scaleY){var matrix=_Mat2.default.identity();matrix=_Mat2.default.scale(matrix,scaleX,scaleY),this.transform(matrix)}},{key:"normal",value:function(){return new Vector2D(-this.y,this.x)}},{key:"magnitude",value:function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))}},{key:"projection",value:function(proyectionVector){var proyectionVectorMagnitude=proyectionVector.magnitude();return this.x*(proyectionVector.x/proyectionVectorMagnitude)+this.y*(proyectionVector.y/proyectionVectorMagnitude)}}]),Vector2D}();exports.default=Vector2D},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var obj,_slicedToArray=function(){return function(arr,i){if(Array.isArray(arr))return arr;if(Symbol.iterator in Object(arr))return function(arr,i){var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{!_n&&_i.return&&_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_Pacman=__webpack_require__(0),_Pacman2=(obj=_Pacman)&&obj.__esModule?obj:{default:obj};var Maze=function(){function Maze(layout,intersections,pacmanSpawn,jailDoor){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Maze),this.layout=layout,this.intersections=new Map,this.balls_count=0,this.pacmanSpawn=pacmanSpawn,this.jailDoor=jailDoor;for(var i=0;i<this.layout.length;i++)for(var j=0;j<this.layout[i].length;j++)this.layout[i][j]>=2&&this.balls_count++;this.balls_total=this.balls_count;for(var _i=0;_i<intersections.length;_i++){var point=intersections[_i][0],directions=intersections[_i][1];if("auto"==directions){var _point=_slicedToArray(point,2),row=_point[0],col=_point[1];directions=[],this.layout[row-1][col]>0&&directions.push(0),this.layout[row][col+1]>0&&directions.push(1),this.layout[row+1][col]>0&&directions.push(2),this.layout[row][col-1]>0&&directions.push(3)}this.intersections.set(JSON.stringify(point),directions)}}return _createClass(Maze,[{key:"consumeBall",value:function(i,j){var cell=this.layout[i][j];return this.layout[i][j]>=2&&(this.layout[i][j]=1,this.balls_count--,_Pacman2.default.GLOBALS.POINTS+=50,3==cell&&(_Pacman2.default.GLOBALS.POINTS+=50)),cell}},{key:"render",value:function(sb){for(var i=0;i<this.layout.length;i++)for(var j=0;j<this.layout[i].length;j++)0==this.layout[i][j]?sb.drawTexture(_Pacman2.default.GLOBALS.tileset[0],8*j,24+8*i):2==this.layout[i][j]?sb.drawTexture(_Pacman2.default.GLOBALS.tileset[2],8*j,24+8*i):3==this.layout[i][j]&&sb.drawTexture(_Pacman2.default.GLOBALS.tileset[3],8*j,24+8*i)}}]),Maze}();Maze.BLOCKS={WALL:0,EMPTY:1,BALL:2,SUPER_BALL:3},exports.default=Maze},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _Phantom2=_interopRequireDefault(__webpack_require__(4)),_Pacman2=_interopRequireDefault(__webpack_require__(0));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var RedPhantom=(0,_Phantom2.default)(4,{x:25,y:0},function(){return{x:_Pacman2.default.GLOBALS.maze.jailDoor.x,y:_Pacman2.default.GLOBALS.maze.jailDoor.y-1}},function(self,_ref){var i=_ref.i,j=_ref.j;self.calculateDirection({x:_Pacman2.default.GLOBALS.PacmanEntity.x,y:_Pacman2.default.GLOBALS.PacmanEntity.y},{i:i,j:j})},function(self){return self.inJail=!1});exports.default=RedPhantom},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();var TextureRegion=function(){function TextureRegion(texture,x,y,width,height){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,TextureRegion),this.texture=texture,void 0===x&&(x=0,width=texture.width),void 0===y&&(y=0,height=texture.height),void 0===width&&(width=x,x=0),void 0===height&&(height=y,y=0),this.x=x,this.y=y,this.width=width,this.height=height}return _createClass(TextureRegion,[{key:"split",value:function(){for(var rows=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,cols=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,rowHeight=this.height/rows,colWidth=this.width/cols,regions=new Array(rows),i=0;i<rows;i++){regions[i]=new Array(cols);for(var j=0;j<cols;j++)regions[i][j]=new TextureRegion(this.texture,this.x+j*colWidth,this.y+i*rowHeight,colWidth,rowHeight)}return regions}}]),TextureRegion}();exports.default=TextureRegion},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _utils=__webpack_require__(2);exports.default=function(src){return!!_utils.AssetCache.has(src)&&_utils.AssetCache.get(src)}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),window.AudioContext=window.AudioContext||window.webkitAudioContext;var SoundContext=new AudioContext;exports.default=SoundContext},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _Mat=__webpack_require__(3);Object.defineProperty(exports,"M3",{enumerable:!0,get:function(){return _interopRequireDefault(_Mat).default}});var _Polygon=__webpack_require__(13);Object.defineProperty(exports,"Polygon",{enumerable:!0,get:function(){return _interopRequireDefault(_Polygon).default}});var _Rectangle=__webpack_require__(34);Object.defineProperty(exports,"Rectangle",{enumerable:!0,get:function(){return _interopRequireDefault(_Rectangle).default}});var _Vector2D=__webpack_require__(6);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"Vector2D",{enumerable:!0,get:function(){return _interopRequireDefault(_Vector2D).default}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var obj,_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_Vector2D=__webpack_require__(6),_Vector2D2=(obj=_Vector2D)&&obj.__esModule?obj:{default:obj};var Polygon=function(){function Polygon(){var vertexs=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Polygon),this.vertexs=vertexs}return _createClass(Polygon,[{key:"transform",value:function(tranformationMatrix){for(var i=0;i<this.vertexs.length;i++)this.vertexs[i].transform(tranformationMatrix)}},{key:"translate",value:function(vector){for(var i=0;i<this.vertexs.length;i++)this.vertexs[i].x+=vector.x,this.vertexs[i].y+=vector.y}},{key:"rotate",value:function(rotation){var matrix=M3.identity();matrix=M3.rotate(matrix,rotation*(Math.PI/180)),this.transform(matrix)}},{key:"sacale",value:function(scaleX,scaleY){var matrix=M3.identity();matrix=M3.scale(matrix,scaleX,scaleY),this.transform(matrix)}},{key:"getNormals",value:function(){for(var normals=new Array(this.vectexs.length),lastVertex=this.vertexs[this.vertexs.length-1],i=0;i<this.vertexs.length;i++)normals[i]=new _Vector2D2.default(this.vertexs[i].x,this.vertexs[i].y,lastVertex.x,lastVertex.y).normal(),lastVertex=this.vertexs[i];return normals}},{key:"projection",value:function(vector){for(var min=this.vertexs[0].projection(vector),max=min,i=1;i<this.vertexs.length;i++){var p=this.vertexs[i].projection(vector);p<min?min=p:p>max&&(max=p)}return{min:min,max:max}}},{key:"collides",value:function(polygon){for(var thisNormals=this.getNormals(),polygonNormals=this.getNormals(),i=0;i<thisNormals.length;i++){var thisProjection=this.projection(thisNormals[i]),polygonProjection=polygon.projection(thisNormals[i]);if(!(thisProjection.max>=polygonProjection.min&&polygonProjection.max>=thisProjection.min))return!1}for(var _i=0;_i<polygonNormals.length;_i++){var _thisProjection=this.projection(polygonNormals[_i]),_polygonProjection=polygon.projection(polygonNormals[_i]);if(!(_thisProjection.max>=_polygonProjection.min&&_polygonProjection.max>=_thisProjection.min))return!1}return!0}}]),Polygon}();exports.default=Polygon},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _Phantom2=_interopRequireDefault(__webpack_require__(4)),_Pacman2=_interopRequireDefault(__webpack_require__(0));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var PinkPhantom=(0,_Phantom2.default)(5,{x:2,y:0},function(){return{x:_Pacman2.default.GLOBALS.maze.jailDoor.x,y:_Pacman2.default.GLOBALS.maze.jailDoor.y+2}},function(self,_ref){var i=_ref.i,j=_ref.j,targePoint={x:_Pacman2.default.GLOBALS.PacmanEntity.x,y:_Pacman2.default.GLOBALS.PacmanEntity.y};_Pacman2.default.GLOBALS.PacmanEntity.direction==_Pacman2.default.GLOBALS.UP?targePoint.y-=4:_Pacman2.default.GLOBALS.PacmanEntity.direction==_Pacman2.default.GLOBALS.RIGHT?targePoint.x+=4:_Pacman2.default.GLOBALS.PacmanEntity.direction==_Pacman2.default.GLOBALS.DOWN?targePoint.y+=4:_Pacman2.default.GLOBALS.PacmanEntity.direction==_Pacman2.default.GLOBALS.LEFT&&(targePoint.x-=4),self.calculateDirection(targePoint,{i:i,j:j})},function(self){var movement=self.v*_Pacman2.default.deltaTime;movement>.1&&(movement=.1),self.y-=movement,self.yRounded=Math.round(10*self.y)/10,Math.floor(self.y)==_Pacman2.default.GLOBALS.maze.jailDoor.y-1&&self.yRounded%1<=.2&&(self.y=_Pacman2.default.GLOBALS.maze.jailDoor.y-1,self.yRounded=_Pacman2.default.GLOBALS.maze.jailDoor.y-1,self.inJail=!1)});exports.default=PinkPhantom},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _Phantom2=_interopRequireDefault(__webpack_require__(4)),_Pacman2=_interopRequireDefault(__webpack_require__(0)),_RedPhantom2=_interopRequireDefault(__webpack_require__(8)),_render=__webpack_require__(1);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var BluePhantom=(0,_Phantom2.default)(6,{x:27,y:34},function(){return{x:_Pacman2.default.GLOBALS.maze.jailDoor.x-2,y:_Pacman2.default.GLOBALS.maze.jailDoor.y+2}},function(self,_ref){var i=_ref.i,j=_ref.j,pacmanPosition={x:Math.floor(_Pacman2.default.GLOBALS.PacmanEntity.x),y:Math.floor(_Pacman2.default.GLOBALS.PacmanEntity.y)},vector=void 0;_Pacman2.default.GLOBALS.PacmanEntity.direction==_Pacman2.default.GLOBALS.UP?vector=new _render.Vector2D(pacmanPosition.x,pacmanPosition.y-2,Math.floor(_RedPhantom2.default.x),Math.floor(_RedPhantom2.default.y)):_Pacman2.default.GLOBALS.PacmanEntity.direction==_Pacman2.default.GLOBALS.RIGHT?vector=new _render.Vector2D(pacmanPosition.x+2,pacmanPosition.y,Math.floor(_RedPhantom2.default.x),Math.floor(_RedPhantom2.default.y)):_Pacman2.default.GLOBALS.PacmanEntity.direction==_Pacman2.default.GLOBALS.DOWN?vector=new _render.Vector2D(pacmanPosition.x,pacmanPosition.y+2,Math.floor(_RedPhantom2.default.x),Math.floor(_RedPhantom2.default.y)):_Pacman2.default.GLOBALS.PacmanEntity.direction==_Pacman2.default.GLOBALS.LEFT&&(vector=new _render.Vector2D(pacmanPosition.x-2,pacmanPosition.y,Math.floor(_RedPhantom2.default.x),Math.floor(_RedPhantom2.default.y))),self.calculateDirection({x:Math.floor(self.x)+2*vector.x,y:Math.floor(self.y)+2*vector.y},{i:i,j:j})},function(self){if(_Pacman2.default.GLOBALS.maze.balls_total-_Pacman2.default.GLOBALS.maze.balls_count>=30){var movement=self.v*_Pacman2.default.deltaTime;movement>.1&&(movement=.1),self.x!=_Pacman2.default.GLOBALS.maze.jailDoor.x?(self.x+=movement,self.xRounded=Math.round(10*self.x)/10,self.x>_Pacman2.default.GLOBALS.maze.jailDoor.x-.1&&self.x<_Pacman2.default.GLOBALS.maze.jailDoor.x+.1&&(self.x=_Pacman2.default.GLOBALS.maze.jailDoor.x,self.xRounded=_Pacman2.default.GLOBALS.maze.jailDoor.x)):(self.y-=movement,self.yRounded=Math.round(10*self.y)/10,Math.floor(self.y)==_Pacman2.default.GLOBALS.maze.jailDoor.y-1&&self.yRounded%1<=.2&&(self.y=_Pacman2.default.GLOBALS.maze.jailDoor.y-1,self.yRounded=_Pacman2.default.GLOBALS.maze.jailDoor.y-1,self.inJail=!1))}});exports.default=BluePhantom},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _Phantom2=_interopRequireDefault(__webpack_require__(4)),_Pacman2=_interopRequireDefault(__webpack_require__(0)),_render=__webpack_require__(1);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var OrangePhantom=(0,_Phantom2.default)(7,{x:0,y:34},function(){return{x:_Pacman2.default.GLOBALS.maze.jailDoor.x+2,y:_Pacman2.default.GLOBALS.maze.jailDoor.y+2}},function(self,_ref){var i=_ref.i,j=_ref.j;new _render.Vector2D(Math.floor(self.x),Math.floor(self.y),Math.floor(_Pacman2.default.GLOBALS.PacmanEntity.x),Math.floor(_Pacman2.default.GLOBALS.PacmanEntity.y)).magnitude()<8?self.calculateDirection(self.patrolPoint,{i:i,j:j}):self.calculateDirection({x:_Pacman2.default.GLOBALS.PacmanEntity.x,y:_Pacman2.default.GLOBALS.PacmanEntity.y},{i:i,j:j})},function(self){if(_Pacman2.default.GLOBALS.maze.balls_total-_Pacman2.default.GLOBALS.maze.balls_count>=_Pacman2.default.GLOBALS.maze.balls_total/3){var movement=self.v*_Pacman2.default.deltaTime;movement>.1&&(movement=.1),self.x!=_Pacman2.default.GLOBALS.maze.jailDoor.x?(self.x-=movement,self.xRounded=Math.round(10*self.x)/10,self.x>_Pacman2.default.GLOBALS.maze.jailDoor.x-.1&&self.x<_Pacman2.default.GLOBALS.maze.jailDoor.x+.1&&(self.x=_Pacman2.default.GLOBALS.maze.jailDoor.x,self.xRounded=_Pacman2.default.GLOBALS.maze.jailDoor.x)):(self.y-=movement,self.yRounded=Math.round(10*self.y)/10,Math.floor(self.y)==_Pacman2.default.GLOBALS.maze.jailDoor.y-1&&self.yRounded%1<=.2&&(self.y=_Pacman2.default.GLOBALS.maze.jailDoor.y-1,self.yRounded=_Pacman2.default.GLOBALS.maze.jailDoor.y-1,self.inJail=!1))}});exports.default=OrangePhantom},function(module,exports,__webpack_require__){"use strict";var obj,_Pacman=__webpack_require__(0),_Pacman2=(obj=_Pacman)&&obj.__esModule?obj:{default:obj},_render=__webpack_require__(1);_Pacman2.default.fitCanvasToConatiner(),_Pacman2.default.addInputManagers(_render.Keyboard),_Pacman2.default.start()},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _Game=__webpack_require__(19);Object.defineProperty(exports,"Game",{enumerable:!0,get:function(){return _interopRequireDefault(_Game).default}});var _Gear=__webpack_require__(27);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"Gear",{enumerable:!0,get:function(){return _interopRequireDefault(_Gear).default}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var obj,_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_assetLoader=__webpack_require__(5),_InputManager=__webpack_require__(26),_InputManager2=(obj=_InputManager)&&obj.__esModule?obj:{default:obj};var requestAnimationFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame,defaultOptions={container_id:"game-container",width:960,height:540},Game=function(){function Game(){var options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},coreGear=arguments[1];!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Game);var _defaultOptions$optio=_extends({},defaultOptions,options),container_id=_defaultOptions$optio.container_id,width=_defaultOptions$optio.width,height=_defaultOptions$optio.height;this.width=width,this.height=height,this.container=document.getElementById(container_id),this.setCanvas(container_id),this.canvas=document.getElementById(container_id+"-canvas"),this.canvas.width=this.width,this.canvas.height=this.height,this.canvas.style.outline="none",this.canvas.setAttribute("tabindex","1"),this.input=new _InputManager2.default(this.canvas),this.context=this.canvas.getContext("2d"),this.fullScreenActive=!1,this.running=!1,this.delta=0,this.then=0,this.loop=this.loop.bind(this),this.coreGear=coreGear}return _createClass(Game,[{key:"setCanvas",value:function(container_id){this.container.requestFullScreen=this.container.requestFullscreen||this.container.msRequestFullscreen||this.container.mozRequestFullScreen||this.container.webkitRequestFullscreen,document.exitFullScreen=document.exitFullscreen||document.msExitFullscreen||document.mozCancelFullScreen||document.webkitCancelFullScreen,this.container.style.background="#000000",this.container.style.position="relative",this.container.style.display="flex",this.container.style.alignItems="center",this.container.style.justifyContent="center",this.container.style.overflow="hidden",this.container.style.width="100%",this.container.style.height="100%",this.container.innerHTML='<canvas id="'+container_id+'-canvas"></canvas>'}},{key:"fitCanvasToConatiner",value:function(){var _this=this;setTimeout(function(){var canvasProportions=_this.canvas.clientWidth/_this.canvas.clientHeight;_this.container.clientWidth/_this.container.clientHeight>canvasProportions?(_this.canvas.style.width="auto",_this.canvas.style.height="100%"):(_this.canvas.style.width="100%",_this.canvas.style.height="auto")},0)}},{key:"resizeCanvas",value:function(renderer){var width=arguments.length>1&&void 0!==arguments[1]?arguments[1]:960,height=arguments.length>2&&void 0!==arguments[2]?arguments[2]:540;(arguments.length>3&&void 0!==arguments[3]&&arguments[3]||this.width!=width||this.height!=height)&&(this.width=width,this.height=height,this.canvas.width=width,this.canvas.height=height)}},{key:"toggleFullScreen",value:function(){var activate=arguments.length>0&&void 0!==arguments[0]?arguments[0]:!this.fullScreenActive;this.fullScreenActive=activate,activate?this.container.requestFullScreen():document.exitFullScreen(),setTimeout(this.fitCanvasToConatiner.bind(this),300)}},{key:"loop",value:function(){var now=Date.now();this.delta=now-this.then,this.then=now,this.running&&(this.input.update(),this.coreGear.$update()),this.coreGear.$render(),requestAnimationFrame(this.loop)}},{key:"start",value:function(){var _this2=this;this.coreGear.$load(),_assetLoader.Loader.$load(function(){_this2.coreGear.init(),_this2.running=!0,_this2.then=Date.now(),requestAnimationFrame(_this2.loop)}.bind(this))}},{key:"pause",value:function(){this.running=!1}},{key:"continue",value:function(){this.then=Date.now(),this.running=!0}},{key:"addInputManagers",value:function(){for(var _len=arguments.length,args=Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];this.input.addManagers([].concat(args))}},{key:"deltaTime",get:function(){return this.delta/1e3}}]),Game}();exports.default=Game},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.loadTextureFromFile=exports.loadTextureFromUrl=void 0;var _Texture2=_interopRequireDefault(__webpack_require__(21)),_utils=__webpack_require__(2),_CacheLoader2=_interopRequireDefault(__webpack_require__(10));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.loadTextureFromUrl=function(url){return new Promise(function(resolve,reject){var cache=(0,_CacheLoader2.default)(url);if(cache)resolve(cache);else{var img=new Image;img.onload=function(){var result=new _Texture2.default(img);_utils.AssetCache.set(url,result),resolve(result)},new URL(url).origin!==window.location.origin&&(img.crossOrigin=""),img.src=url}})},exports.loadTextureFromFile=function(file){return new Promise(function(resolve,reject){var cache=(0,_CacheLoader2.default)(file.name);if(cache)resolve(cache);else{var fr=new FileReader,img=new Image;fr.onloadend=function(){img.src=fr.result},img.onload=function(){var result=new _Texture2.default(img);_utils.AssetCache.set(file.name,result),resolve(result)},fr.readAsDataURL(file)}})}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var obj,_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_TextureRegion=__webpack_require__(9),_TextureRegion2=(obj=_TextureRegion)&&obj.__esModule?obj:{default:obj};var Texture=function(){function Texture(image){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Texture),this.image=image,this.width=image.width,this.height=image.height}return _createClass(Texture,[{key:"split",value:function(){for(var rows=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,cols=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,rowHeight=this.height/rows,colWidth=this.width/cols,regions=new Array(rows),i=0;i<rows;i++){regions[i]=new Array(cols);for(var j=0;j<cols;j++)regions[i][j]=new _TextureRegion2.default(this,j*colWidth,i*rowHeight,colWidth,rowHeight)}return regions}}]),Texture}();exports.default=Texture},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();var emiter=new(function(){function EventEmiter(){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,EventEmiter),this.subscriptions=new Map}return _createClass(EventEmiter,[{key:"subscribe",value:function(subscriptor,message,callback){this.subscriptions.has(message)||this.subscriptions.set(message,new Map),this.subscriptions.get(message).set(subscriptor,callback)}},{key:"unsubscribe",value:function(subscriptor,message){if(this.subscriptions.has(message)){var msgSubs=this.subscriptions.get(message);msgSubs.has(subscriptor)&&(msgSubs.delete(subscriptor),0==msgSubs.size&&this.subscriptions.delete(message))}}},{key:"emit",value:function(message){if(this.subscriptions.has(message)){for(var msgSubs=this.subscriptions.get(message),_len=arguments.length,args=Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)args[_key-1]=arguments[_key];var _iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=msgSubs.values()[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){_step.value.apply(void 0,args)}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{!_iteratorNormalCompletion&&_iterator.return&&_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}}}}]),EventEmiter}());exports.default=emiter},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.loadSoundFromFile=exports.loadSoundFromUrl=void 0;var _Sound2=_interopRequireDefault(__webpack_require__(24)),_SoundContext2=_interopRequireDefault(__webpack_require__(11)),_CacheLoader2=_interopRequireDefault(__webpack_require__(10)),_utils=__webpack_require__(2);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}exports.loadSoundFromUrl=function(url){return new Promise(function(resolve,reject){var cache=(0,_CacheLoader2.default)(url);if(cache)resolve(cache);else{var request=new XMLHttpRequest;request.open("GET",url,!0),request.responseType="arraybuffer",request.onload=function(){return _SoundContext2.default.decodeAudioData(request.response,function(buffer){var result=new _Sound2.default(buffer);return _utils.AssetCache.set(url,result),resolve(result)},function(error){return reject(error)})},request.send()}})},exports.loadSoundFromFile=function(file){return new Promise(function(resolve,reject){var cache=(0,_CacheLoader2.default)(file.name);if(cache)resolve(cache);else{var fr=new FileReader;fr.onloadend=function(){fr.result,_SoundContext2.default.decodeAudioData(request.response,function(buffer){var result=new _Sound2.default(buffer);return _utils.AssetCache.set(file.name,result),resolve(result)},function(error){return reject(error)})},fr.readAsArrayBuffer(file)}})}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var obj,_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_SoundContext=__webpack_require__(11),_SoundContext2=(obj=_SoundContext)&&obj.__esModule?obj:{default:obj};var Sound=function(){function Sound(audioBuffer){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Sound),this.audioBuffer=audioBuffer,this.instances={},this.idCounter=0}return _createClass(Sound,[{key:"play",value:function(){var _this=this,options=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},_time$volume$loop$opt=_extends({time:0,volume:1,loop:!1},options),time=_time$volume$loop$opt.time,volume=_time$volume$loop$opt.volume,loop=_time$volume$loop$opt.loop,id=this.idCounter++,source=_SoundContext2.default.createBufferSource();source.addEventListener("ended",function(e){return delete _this.instances[id]}),source.buffer=this.audioBuffer,source.loop=loop;var gainNode=_SoundContext2.default.createGain();return source.connect(gainNode),gainNode.gain.setTargetAtTime(volume,_SoundContext2.default.currentTime,.015),gainNode.connect(_SoundContext2.default.destination),source.start(time),this.instances[id]={source:source,gainNode:gainNode},id}},{key:"isSet",value:function(id){return Boolean(this.instances[id])}},{key:"stop",value:function(id){if(!this.isSet(id))return!1;this.instances[id].source.stop(0),this.instances[id].source.noteOff(0),delete this.instances[id]}},{key:"setvolume",value:function(id,volume){if(!this.isSet(id))return!1;this.instances[id].gainNode.gain.setTargetAtTime(volume,_SoundContext2.default.currentTime,.015)}}]),Sound}();exports.default=Sound},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _slicedToArray=function(){return function(arr,i){if(Array.isArray(arr))return arr;if(Symbol.iterator in Object(arr))return function(arr,i){var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{!_n&&_i.return&&_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)}var AssetLoader=function(){function AssetLoader(loaders){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,AssetLoader),this.unLoadContent=[],this.loadContentReferences=[],this.addLoaders(loaders)}return _createClass(AssetLoader,[{key:"addLoaders",value:function(loaders){var loaderEntries=Object.entries(loaders),_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=loaderEntries[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var _ref=_step.value,_ref2=_slicedToArray(_ref,2),key=_ref2[0],value=_ref2[1];this[key]=value}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{!_iteratorNormalCompletion&&_iterator.return&&_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}}},{key:"$addLoadContent",value:function(source,content){this.unLoadContent=[].concat(_toConsumableArray(this.unLoadContent),_toConsumableArray(Object.values(content))),this.loadContentReferences=[].concat(_toConsumableArray(this.loadContentReferences),_toConsumableArray(Object.keys(content).map(function(key){return[source,key]})))}},{key:"$load",value:function(){var _this=this,then=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){return 0};Promise.all(this.unLoadContent).then(function(values){for(var i=0;i<values.length;i++){_this.loadContentReferences[i][0][_this.loadContentReferences[i][1]]=values[i]}_this.unLoadContent=[],_this.loadContentReferences=[],then()})}}]),AssetLoader}();exports.default=AssetLoader},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _slicedToArray=function(){return function(arr,i){if(Array.isArray(arr))return arr;if(Symbol.iterator in Object(arr))return function(arr,i){var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{!_n&&_i.return&&_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();var InputManager=function(){function InputManager(canvas){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,InputManager),this.canvas=canvas,this._updateFunctions=[]}return _createClass(InputManager,[{key:"update",value:function(){for(var i=0;i<this._updateFunctions.length;i++)this._updateFunctions[i]()}},{key:"addManagers",value:function(){for(var managers=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],newUpdateFunctions=new Array(managers.length),i=0;i<managers.length;i++){var methodList=Object.entries(managers[i].methods),_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=methodList[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var _ref=_step.value,_ref2=_slicedToArray(_ref,2),key=_ref2[0],value=_ref2[1];this[key]=value}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{!_iteratorNormalCompletion&&_iterator.return&&_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}managers[i].init.bind(this)(),newUpdateFunctions[i]=managers[i].update.bind(this)}this._updateFunctions=[].concat(function(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)}(this._updateFunctions),newUpdateFunctions)}}]),InputManager}();exports.default=InputManager},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var obj,_slicedToArray=function(){return function(arr,i){if(Array.isArray(arr))return arr;if(Symbol.iterator in Object(arr))return function(arr,i){var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{!_n&&_i.return&&_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_extends=Object.assign||function(target){for(var i=1;i<arguments.length;i++){var source=arguments[i];for(var key in source)Object.prototype.hasOwnProperty.call(source,key)&&(target[key]=source[key])}return target},_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_assetLoader=__webpack_require__(5),_utils=__webpack_require__(2),_GearStack=__webpack_require__(28),_GearStack2=(obj=_GearStack)&&obj.__esModule?obj:{default:obj};var Gear=function(){function Gear(){var gear=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Gear);var _load$init$update$ren=_extends({load:function(){return{}},init:function(){},update:function(){},render:function(){},gears:[],methods:{}},gear),load=_load$init$update$ren.load,init=_load$init$update$ren.init,update=_load$init$update$ren.update,render=_load$init$update$ren.render,gears=_load$init$update$ren.gears,methods=_load$init$update$ren.methods;this.init=init,this.gearStack=new _GearStack2.default(this,gears),this.pause=!1,this.active=!0,this.update=update,this.render=render,this.load=load;var methodList=Object.entries(methods),_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=methodList[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var _ref=_step.value,_ref2=_slicedToArray(_ref,2),key=_ref2[0],value=_ref2[1];this[key]=value}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{!_iteratorNormalCompletion&&_iterator.return&&_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}}return _createClass(Gear,[{key:"$load",value:function(){_assetLoader.Loader.$addLoadContent(this,this.load()),this.gearStack.load()}},{key:"$update",value:function(){!this.pause&&this.active&&this.update.apply(this,arguments)}},{key:"$render",value:function(){this.active&&this.render.apply(this,arguments)}},{key:"$emit",value:function(message){for(var _len=arguments.length,args=Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)args[_key-1]=arguments[_key];_utils.EventEmiter.emit.apply(_utils.EventEmiter,[message].concat(args))}},{key:"$subscribe",value:function(message,callback){_utils.EventEmiter.subscribe(this,message,callback.bind(this))}},{key:"$unsubscribe",value:function(message){_utils.EventEmiter.unsubscribe(this,message)}}]),Gear}();exports.default=Gear},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _slicedToArray=function(){return function(arr,i){if(Array.isArray(arr))return arr;if(Symbol.iterator in Object(arr))return function(arr,i){var _arr=[],_n=!0,_d=!1,_e=void 0;try{for(var _s,_i=arr[Symbol.iterator]();!(_n=(_s=_i.next()).done)&&(_arr.push(_s.value),!i||_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{!_n&&_i.return&&_i.return()}finally{if(_d)throw _e}}return _arr}(arr,i);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();var GearStack=function(){function GearStack(parent){var stack=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,GearStack);var gears=Object.entries(stack);this.stack=new Array(gears.length);var i=0,_iteratorNormalCompletion=!0,_didIteratorError=!1,_iteratorError=void 0;try{for(var _step,_iterator=gears[Symbol.iterator]();!(_iteratorNormalCompletion=(_step=_iterator.next()).done);_iteratorNormalCompletion=!0){var _ref=_step.value,_ref2=_slicedToArray(_ref,2),key=_ref2[0],value=_ref2[1];parent[key]=value,this.stack[i]=value,i++}}catch(err){_didIteratorError=!0,_iteratorError=err}finally{try{!_iteratorNormalCompletion&&_iterator.return&&_iterator.return()}finally{if(_didIteratorError)throw _iteratorError}}this.pause=!1,this.active=!0}return _createClass(GearStack,[{key:"init",value:function(){for(var _i=0;_i<this.stack.length;_i++)this.stack[_i].init()}},{key:"update",value:function(){if(!this.pause&&this.active)for(var _i2=0;_i2<this.stack.length;_i2++){var _stack$_i;(_stack$_i=this.stack[_i2]).$update.apply(_stack$_i,arguments)}}},{key:"render",value:function(){if(this.active)for(var _i3=0;_i3<this.stack.length;_i3++){var _stack$_i2;(_stack$_i2=this.stack[_i3]).$render.apply(_stack$_i2,arguments)}}},{key:"load",value:function(){for(var _i4=0;_i4<this.stack.length;_i4++)this.stack[_i4].$load()}}]),GearStack}();exports.default=GearStack},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _TextureRegion=__webpack_require__(9);Object.defineProperty(exports,"TextureRegion",{enumerable:!0,get:function(){return _interopRequireDefault(_TextureRegion).default}});var _SpriteBatch=__webpack_require__(30);Object.defineProperty(exports,"SpriteBatch",{enumerable:!0,get:function(){return _interopRequireDefault(_SpriteBatch).default}});var _Animation=__webpack_require__(32);Object.defineProperty(exports,"Animation",{enumerable:!0,get:function(){return _interopRequireDefault(_Animation).default}});var _Camera=__webpack_require__(33);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"Camera",{enumerable:!0,get:function(){return _interopRequireDefault(_Camera).default}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_ImageBuffer2=_interopRequireDefault(__webpack_require__(31)),_Mat2=_interopRequireDefault(__webpack_require__(3));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++)arr2[i]=arr[i];return arr2}return Array.from(arr)}var SpriteBatch=function(){function SpriteBatch(context){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,SpriteBatch),this.context=context,this.buffer=new _ImageBuffer2.default(context.canvas.width,context.canvas.height),this.drawing=!1,this.projectionMatrix=_Mat2.default.identity()}return _createClass(SpriteBatch,[{key:"begin",value:function(){if(this.drawing)throw"This batch is currenly drawing";this.drawing=!0,this.buffer.clear()}},{key:"drawTexture",value:function(texture,srcX,srcY,srcWidth,srcHeight,dstX,dstY,dstWidth,dstHeight){var _buffer$context,srcRotation=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,offsetX=arguments.length>10&&void 0!==arguments[10]?arguments[10]:0,offsetY=arguments.length>11&&void 0!==arguments[11]?arguments[11]:0;if(!this.drawing)throw"This batch is not begin to draw";this.buffer.context.save(),void 0===dstX&&(dstX=srcX,srcX=0),void 0===dstY&&(dstY=srcY,srcY=0),void 0===srcWidth&&(srcWidth=texture.width),void 0===srcHeight&&(srcHeight=texture.height),void 0===dstWidth&&(dstWidth=srcWidth,srcWidth=texture.width),void 0===dstHeight&&(dstHeight=srcHeight,srcHeight=texture.height),"TextureRegion"==texture.constructor.name&&(srcX+=texture.x,srcY+=texture.y,texture=texture.texture);var matrix=_Mat2.default.identity();matrix=_Mat2.default.translate(matrix,dstX-dstWidth*offsetX,dstY-dstHeight*offsetY),matrix=_Mat2.default.translate(matrix,dstWidth*offsetX,dstHeight*offsetY),matrix=_Mat2.default.rotate(matrix,srcRotation*(Math.PI/180)),matrix=_Mat2.default.scale(matrix,dstWidth/srcWidth,dstHeight/srcHeight),matrix=_Mat2.default.translate(matrix,dstWidth*-offsetX,dstHeight*-offsetY),(_buffer$context=this.buffer.context).setTransform.apply(_buffer$context,_toConsumableArray(_Mat2.default.toCanvas2dMatrix(_Mat2.default.multiply(this.projectionMatrix,matrix)))),this.buffer.context.drawImage(texture.image,srcX,srcY,srcWidth,srcHeight,0,0,srcWidth,srcHeight),this.buffer.context.restore()}},{key:"drawText",value:function(text,color,font,aling,srcX,srcY){var _buffer$context2;if(!this.drawing)throw"This batch is not begin to draw";this.buffer.context.save(),(_buffer$context2=this.buffer.context).setTransform.apply(_buffer$context2,_toConsumableArray(_Mat2.default.toCanvas2dMatrix(this.projectionMatrix))),this.buffer.context.font=font,this.buffer.context.fillStyle=color,this.buffer.context.textAlign=aling,this.buffer.context.fillText(text,srcX,srcY),this.buffer.context.restore()}},{key:"end",value:function(){if(!this.drawing)throw"This batch is not begin to draw";this.drawing=!1,this.context.drawImage(this.buffer.canvas,0,0)}},{key:"setProjection",value:function(matrix){this.projectionMatrix=matrix}},{key:"resetProjection",value:function(){this.projectionMatrix=_Mat2.default.identity()}}]),SpriteBatch}();exports.default=SpriteBatch},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();var ImageBuffer=function(){function ImageBuffer(width,height){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,ImageBuffer),this.canvas=document.createElement("canvas"),this.canvas.width=width,this.canvas.height=height,this.context=this.canvas.getContext("2d")}return _createClass(ImageBuffer,[{key:"clear",value:function(){this.context.clearRect(0,0,this.canvas.width,this.canvas.height)}}]),ImageBuffer}();exports.default=ImageBuffer},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}();var Animation=function(){function Animation(frameTime,frames){var playMode=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Animation),this.frameTime=frameTime,this.frames=frames,this.playMode=playMode,this.animationEnded=!1,this._frame=this.playMode>1?this.frames.length-1:0,this._acumulateTime=0}return _createClass(Animation,[{key:"getFrame",value:function(deltaTime){if(this.animationEnded)return this.frames[this._frame];var framesElapses=Math.floor((this._acumulateTime+deltaTime)/this.frameTime);return this._acumulateTime=this._acumulateTime+deltaTime-framesElapses*this.frameTime,this._nextFrame(framesElapses),this.frames[this._frame]}},{key:"_nextFrame",value:function(frameElapse){this["_nextFrame"+this.playMode](frameElapse)}},{key:"_nextFrame0",value:function(frameElapse){this._frame=Math.min(this._frame+=frameElapse,this.frames.length-1),this._frame==this.frames.length-1&&(this.animationEnded=!0)}},{key:"_nextFrame1",value:function(frameElapse){this._frame=(this._frame+frameElapse)%this.frames.length}},{key:"_nextFrame2",value:function(frameElapse){this._frame=Math.max(this._frame-=frameElapse,0),0==this._frame&&(this.animationEnded=!0)}},{key:"_nextFrame3",value:function(frameElapse){this._frame=(this._frame-frameElapse).mod(this.frames.length)}}]),Animation}();Animation.PLAY_MODES={NORMAL:0,LOOP:1,REVERSE:2,LOOP_REVERSE:3},exports.default=Animation},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var obj,_createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_Mat=__webpack_require__(3),_Mat2=(obj=_Mat)&&obj.__esModule?obj:{default:obj};var Camera=function(){function Camera(width,height){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Camera),this.x=0,this.y=0,this.width=width,this.height=height,this.zoom=1,this.rotation=0,this.offsetX=0,this.offsetY=0,this.cameraMatrix=_Mat2.default.identity()}return _createClass(Camera,[{key:"translate",value:function(x,y){this.x+=x,this.y+=y}},{key:"setPosition",value:function(x,y){this.x=x,this.y=y}},{key:"rotate",value:function(rotation){this.rotation+=rotation}},{key:"setRotation",value:function(rotation){this.rotation=rotation}},{key:"setZoom",value:function(zoom){this.zoom=zoom}},{key:"setOffset",value:function(offsetX,offsetY){this.offsetX=offsetX,this.offsetY=offsetY}},{key:"update",value:function(){var matrix=_Mat2.default.identity();matrix=_Mat2.default.translate(matrix,-(this.x-this.offsetX*this.width),-(this.y-this.offsetY*this.height)),matrix=_Mat2.default.translate(matrix,this.width*this.offsetX,this.height*this.offsetY),matrix=_Mat2.default.rotate(matrix,this.rotation*(Math.PI/180)),matrix=_Mat2.default.scale(matrix,this.zoom,this.zoom),matrix=_Mat2.default.translate(matrix,this.width*-this.offsetX,this.height*-this.offsetY),this.cameraMatrix=matrix}}]),Camera}();exports.default=Camera},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _createClass=function(){function defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}}return function(Constructor,protoProps,staticProps){return protoProps&&defineProperties(Constructor.prototype,protoProps),staticProps&&defineProperties(Constructor,staticProps),Constructor}}(),_Polygon3=_interopRequireDefault(__webpack_require__(13)),_Vector2D2=_interopRequireDefault(__webpack_require__(6));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var Rectangle=function(_Polygon){function Rectangle(x,y,width,height){!function(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function")}(this,Rectangle);var _this=function(self,call){if(!self)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!call||"object"!=typeof call&&"function"!=typeof call?self:call}(this,(Rectangle.__proto__||Object.getPrototypeOf(Rectangle)).call(this,[new _Vector2D2.default(x,y),new _Vector2D2.default(x,y+height),new _Vector2D2.default(x+width,y+height),new _Vector2D2.default(x+width,y)]));return _this.width=width,_this.height=height,_this}return function(subClass,superClass){if("function"!=typeof superClass&&null!==superClass)throw new TypeError("Super expression must either be null or a function, not "+typeof superClass);subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,enumerable:!1,writable:!0,configurable:!0}}),superClass&&(Object.setPrototypeOf?Object.setPrototypeOf(subClass,superClass):subClass.__proto__=superClass)}(Rectangle,_Polygon3.default),_createClass(Rectangle,[{key:"getNormals",value:function(){return[new _Vector2D2.default(this.vertexs[0].x,this.vertexs[0].y,this.vertexs[1].x,this.vertexs[1].y),new _Vector2D2.default(this.vertexs[1].x,this.vertexs[1].y,this.vertexs[2].x,this.vertexs[2].y)]}}]),Rectangle}();exports.default=Rectangle},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _KeyboardInputManager=__webpack_require__(36);Object.defineProperty(exports,"KeyboardInputManager",{enumerable:!0,get:function(){return _interopRequireDefault(_KeyboardInputManager).default}});var _MouseInputManager=__webpack_require__(38);function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}Object.defineProperty(exports,"MouseInputManager",{enumerable:!0,get:function(){return _interopRequireDefault(_MouseInputManager).default}})},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var obj,_KeyboardKeys=__webpack_require__(37);var KeyboardInputManager={KEYS:((obj=_KeyboardKeys)&&obj.__esModule?obj:{default:obj}).default,init:function(){var _this=this;this._keys=new Array(256);for(var i=0;i<256;)this._keys[i++]=[!1,!1],this._keys[i++]=[!1,!1],this._keys[i++]=[!1,!1],this._keys[i++]=[!1,!1],this._keys[i++]=[!1,!1],this._keys[i++]=[!1,!1],this._keys[i++]=[!1,!1],this._keys[i++]=[!1,!1],this._keys[i++]=[!1,!1],this._keys[i++]=[!1,!1],this._keys[i++]=[!1,!1],this._keys[i++]=[!1,!1],this._keys[i++]=[!1,!1],this._keys[i++]=[!1,!1],this._keys[i++]=[!1,!1],this._keys[i++]=[!1,!1];this.canvas.addEventListener("keydown",function(e){return _this._keySet(e.keyCode,!0)}),this.canvas.addEventListener("keyup",function(e){return _this._keySet(e.keyCode,!1)})},update:function(){for(var i=0;i<256;)this._keys[i][0]=this._keys[i++][1],this._keys[i][0]=this._keys[i++][1],this._keys[i][0]=this._keys[i++][1],this._keys[i][0]=this._keys[i++][1],this._keys[i][0]=this._keys[i++][1],this._keys[i][0]=this._keys[i++][1],this._keys[i][0]=this._keys[i++][1],this._keys[i][0]=this._keys[i++][1],this._keys[i][0]=this._keys[i++][1],this._keys[i][0]=this._keys[i++][1],this._keys[i][0]=this._keys[i++][1],this._keys[i][0]=this._keys[i++][1],this._keys[i][0]=this._keys[i++][1],this._keys[i][0]=this._keys[i++][1],this._keys[i][0]=this._keys[i++][1],this._keys[i][0]=this._keys[i++][1]},methods:{_keySet:function(keycode,value){this._keys[keycode][1]=value},isKeyJustPressed:function(keycode){return!this._keys[keycode][0]&&this._keys[keycode][1]},isKeyDown:function(keycode){return this._keys[keycode][0]&&this._keys[keycode][1]}}};exports.default=KeyboardInputManager},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.default={DELETE:8,ENTER:13,SHIFT:16,CONTROL:17,ATL:18,SPACEBAR:32,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,NUMBER_0:48,NUMBER_1:49,NUMBER_2:50,NUMBER_3:51,NUMBER_4:52,NUMBER_5:53,NUMBER_6:54,NUMBER_7:55,NUMBER_8:56,NUMBER_9:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var obj,_maths=__webpack_require__(12),_MouseButtons=__webpack_require__(39);var MouseInputManager={BUTTONS:((obj=_MouseButtons)&&obj.__esModule?obj:{default:obj}).default,init:function(){var _this=this;this._mouseButtons=[[!1,!1],[!1,!1],[!1,!1]],this.mousePosition=new _maths.Vector2D(0,0),this.canvas.addEventListener("mousedown",function(e){return _this._clickSet(e.button,!0)}),this.canvas.addEventListener("mouseup",function(e){return _this._clickSet(e.button,!1)}),this.canvas.addEventListener("mousemove",function(e){return _this._mouseMove(e.pageX,e.pageY)})},update:function(){this._mouseButtons[0][0]=this._mouseButtons[0][1],this._mouseButtons[1][0]=this._mouseButtons[1][1],this._mouseButtons[2][0]=this._mouseButtons[2][1]},methods:{_mouseMove:function(x,y){this.mousePosition.setPosition(Math.round((x-this.canvas.offsetLeft)*(this.canvas.width/this.canvas.offsetWidth)),Math.round((y-this.canvas.offsetTop)*(this.canvas.height/this.canvas.offsetHeight)))},_clickSet:function(clickcode,value){this._mouseButtons[clickcode][1]=value},isJustClicked:function(clickcode){return!this._mouseButtons[clickcode][0]&&this._mouseButtons[clickcode][1]},isClicked:function(clickcode){return this._mouseButtons[clickcode][0]&&this._mouseButtons[clickcode][1]}}};exports.default=MouseInputManager},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});exports.default={LEFT_CLICK:0,CENTER_CLICK:1,RIGHT_CLICK:2}},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var obj,_Maze=__webpack_require__(7);var ClassicMaze=new((obj=_Maze)&&obj.__esModule?obj:{default:obj}).default([[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],[0,2,2,2,2,2,2,2,2,2,2,2,2,0,0,2,2,2,2,2,2,2,2,2,2,2,2,0],[0,2,0,0,0,0,2,0,0,0,0,0,2,0,0,2,0,0,0,0,0,2,0,0,0,0,2,0],[0,3,0,1,1,0,2,0,1,1,1,0,2,0,0,2,0,1,1,1,0,2,0,1,1,0,3,0],[0,2,0,0,0,0,2,0,0,0,0,0,2,0,0,2,0,0,0,0,0,2,0,0,0,0,2,0],[0,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,0],[0,2,0,0,0,0,2,0,0,2,0,0,0,0,0,0,0,0,2,0,0,2,0,0,0,0,2,0],[0,2,0,0,0,0,2,0,0,2,0,0,0,0,0,0,0,0,2,0,0,2,0,0,0,0,2,0],[0,2,2,2,2,2,2,0,0,2,2,2,2,0,0,2,2,2,2,0,0,2,2,2,2,2,2,0],[0,0,0,0,0,0,2,0,0,0,0,0,1,0,0,1,0,0,0,0,0,2,0,0,0,0,0,0],[1,1,1,1,1,0,2,0,0,0,0,0,1,0,0,1,0,0,0,0,0,2,0,1,1,1,1,1],[1,1,1,1,1,0,2,0,0,1,1,1,1,1,1,1,1,1,1,0,0,2,0,1,1,1,1,1],[1,1,1,1,1,0,2,0,0,1,0,0,0,1,1,0,0,0,1,0,0,2,0,1,1,1,1,1],[0,0,0,0,0,0,2,0,0,1,0,1,1,1,1,1,1,0,1,0,0,2,0,0,0,0,0,0],[1,1,1,1,1,1,2,1,1,1,0,1,1,1,1,1,1,0,1,1,1,2,1,1,1,1,1,1],[0,0,0,0,0,0,2,0,0,1,0,1,1,1,1,1,1,0,1,0,0,2,0,0,0,0,0,0],[1,1,1,1,1,0,2,0,0,1,0,0,0,0,0,0,0,0,1,0,0,2,0,1,1,1,1,1],[1,1,1,1,1,0,2,0,0,1,1,1,1,1,1,1,1,1,1,0,0,2,0,1,1,1,1,1],[1,1,1,1,1,0,2,0,0,1,0,0,0,0,0,0,0,0,1,0,0,2,0,1,1,1,1,1],[0,0,0,0,0,0,2,0,0,1,0,0,0,0,0,0,0,0,1,0,0,2,0,0,0,0,0,0],[0,2,2,2,2,2,2,2,2,2,2,2,2,0,0,2,2,2,2,2,2,2,2,2,2,2,2,0],[0,2,0,0,0,0,2,0,0,0,0,0,2,0,0,2,0,0,0,0,0,2,0,0,0,0,2,0],[0,2,0,0,0,0,2,0,0,0,0,0,2,0,0,2,0,0,0,0,0,2,0,0,0,0,2,0],[0,3,2,2,0,0,2,2,2,2,2,2,2,1,1,2,2,2,2,2,2,2,0,0,2,2,3,0],[0,0,0,2,0,0,2,0,0,2,0,0,0,0,0,0,0,0,2,0,0,2,0,0,2,0,0,0],[0,0,0,2,0,0,2,0,0,2,0,0,0,0,0,0,0,0,2,0,0,2,0,0,2,0,0,0],[0,2,2,2,2,2,2,0,0,2,2,2,2,0,0,2,2,2,2,0,0,2,2,2,2,2,2,0],[0,2,0,0,0,0,0,0,0,0,0,0,2,0,0,2,0,0,0,0,0,0,0,0,0,0,2,0],[0,2,0,0,0,0,0,0,0,0,0,0,2,0,0,2,0,0,0,0,0,0,0,0,0,0,2,0],[0,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,0],[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]],[[[1,1],"auto"],[[1,6],"auto"],[[1,12],"auto"],[[1,15],"auto"],[[1,21],"auto"],[[1,26],"auto"],[[5,1],"auto"],[[5,6],"auto"],[[5,9],"auto"],[[5,12],"auto"],[[5,15],"auto"],[[5,18],"auto"],[[5,21],"auto"],[[5,26],"auto"],[[8,1],"auto"],[[8,6],"auto"],[[8,9],"auto"],[[8,12],"auto"],[[8,15],"auto"],[[8,18],"auto"],[[8,21],"auto"],[[8,26],"auto"],[[11,9],"auto"],[[11,12],[1,3]],[[11,15],[1,3]],[[11,18],"auto"],[[14,6],"auto"],[[14,9],"auto"],[[14,18],"auto"],[[14,21],"auto"],[[17,9],"auto"],[[17,18],"auto"],[[20,1],"auto"],[[20,6],"auto"],[[20,9],"auto"],[[20,12],"auto"],[[20,15],"auto"],[[20,18],"auto"],[[20,21],"auto"],[[20,26],"auto"],[[23,1],"auto"],[[23,3],"auto"],[[23,6],"auto"],[[23,9],"auto"],[[23,12],[1,3]],[[23,15],[1,3]],[[23,18],"auto"],[[23,21],"auto"],[[23,24],"auto"],[[23,26],"auto"],[[26,1],"auto"],[[26,3],"auto"],[[26,6],"auto"],[[26,9],"auto"],[[26,12],"auto"],[[26,15],"auto"],[[26,18],"auto"],[[26,21],"auto"],[[26,24],"auto"],[[26,26],"auto"],[[29,1],"auto"],[[29,12],"auto"],[[29,15],"auto"],[[29,26],"auto"]],{x:13.5,y:26},{x:13.5,y:15});exports.default=ClassicMaze},function(module,exports,__webpack_require__){"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var _render=__webpack_require__(1),_Pacman2=_interopRequireDefault(__webpack_require__(0)),_Maze2=_interopRequireDefault(__webpack_require__(7)),_RedPhantom2=_interopRequireDefault(__webpack_require__(8)),_PinkPhantom2=_interopRequireDefault(__webpack_require__(14)),_BluePhantom2=_interopRequireDefault(__webpack_require__(15)),_OrangePhantom2=_interopRequireDefault(__webpack_require__(16));function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{default:obj}}var PacmanEntity=new _render.Gear({init:function(){this.frame=_Pacman2.default.GLOBALS.tileset[1],this.x=_Pacman2.default.GLOBALS.maze.pacmanSpawn.x,this.y=_Pacman2.default.GLOBALS.maze.pacmanSpawn.y,this.xRounded=_Pacman2.default.GLOBALS.maze.pacmanSpawn.x,this.yRounded=_Pacman2.default.GLOBALS.maze.pacmanSpawn.y,this.v=5,this.direction=_Pacman2.default.GLOBALS.LEFT,this.nextDirection=_Pacman2.default.GLOBALS.LEFT},update:function(){this.x,this.y;_Pacman2.default.input.isKeyDown(_render.Keyboard.KEYS.UP_ARROW)?this.nextDirection=_Pacman2.default.GLOBALS.UP:_Pacman2.default.input.isKeyDown(_render.Keyboard.KEYS.DOWN_ARROW)?this.nextDirection=_Pacman2.default.GLOBALS.DOWN:_Pacman2.default.input.isKeyDown(_render.Keyboard.KEYS.LEFT_ARROW)?this.nextDirection=_Pacman2.default.GLOBALS.LEFT:_Pacman2.default.input.isKeyDown(_render.Keyboard.KEYS.RIGHT_ARROW)&&(this.nextDirection=_Pacman2.default.GLOBALS.RIGHT),this.updatePosition(),this.checkEntityColision()},render:function(sb){sb.drawTexture(this.frame,8*this.xRounded,8*this.yRounded)},methods:{updatePosition:function(){(this.direction+this.nextDirection)%2==0&&(this.direction=this.nextDirection);var movement=this.v*_Pacman2.default.deltaTime;movement>.1&&(movement=.1),this.direction==_Pacman2.default.GLOBALS.UP?this.y-=movement:this.direction==_Pacman2.default.GLOBALS.RIGHT?this.x+=movement:this.direction==_Pacman2.default.GLOBALS.DOWN?this.y+=movement:this.direction==_Pacman2.default.GLOBALS.LEFT&&(this.x-=movement),this.fixPosition(),this.xRounded=Math.round(10*this.x)/10,this.yRounded=Math.round(10*this.y)/10,this.changeDirection()},changeDirection:function(){var _getTile=this.getTile(),i=_getTile.i,j=_getTile.j;3==_Pacman2.default.GLOBALS.maze.consumeBall(i,j)&&this.$emit("enterPanic"),this.direction!=this.nextDirection&&(this.nextDirection==_Pacman2.default.GLOBALS.UP&&_Pacman2.default.GLOBALS.maze.layout[i-1][j]>0&&this.xRounded%1<=.3?(this.x=Math.floor(this.x),this.direction=this.nextDirection):this.nextDirection==_Pacman2.default.GLOBALS.RIGHT&&_Pacman2.default.GLOBALS.maze.layout[i][j+1]>0&&this.yRounded%1<=.3?(this.y=Math.floor(this.y),this.direction=this.nextDirection):this.nextDirection==_Pacman2.default.GLOBALS.DOWN&&_Pacman2.default.GLOBALS.maze.layout[i+1][j]>0&&this.xRounded%1<=.3?(this.x=Math.floor(this.x),this.direction=this.nextDirection):this.nextDirection==_Pacman2.default.GLOBALS.LEFT&&_Pacman2.default.GLOBALS.maze.layout[i][j-1]>0&&this.yRounded%1<=.3&&(this.y=Math.floor(this.y),this.direction=this.nextDirection))},fixPosition:function(){var _getTile2=this.getTile(),i=_getTile2.i,j=_getTile2.j;this.direction==_Pacman2.default.GLOBALS.UP&&_Pacman2.default.GLOBALS.maze.layout[i][j]==_Maze2.default.BLOCKS.WALL?this.y=Math.ceil(this.y):this.direction==_Pacman2.default.GLOBALS.RIGHT&&_Pacman2.default.GLOBALS.maze.layout[i][j+1]==_Maze2.default.BLOCKS.WALL?this.x=Math.floor(this.x):this.direction==_Pacman2.default.GLOBALS.DOWN&&_Pacman2.default.GLOBALS.maze.layout[i+1][j]==_Maze2.default.BLOCKS.WALL?this.y=Math.floor(this.y):this.direction==_Pacman2.default.GLOBALS.LEFT&&_Pacman2.default.GLOBALS.maze.layout[i][j]==_Maze2.default.BLOCKS.WALL&&(this.x=Math.ceil(this.x)),this.x<-1&&(this.x=28),this.x>28&&(this.x=-1)},getTile:function(){return{i:Math.floor(this.y-3),j:Math.floor(this.x)}},collides:function(entity){return this.x+1>=entity.x&&entity.x+1>=this.x&&this.y+1>=entity.y&&entity.y+1>=this.y},checkEntityColision:function(){this.collides(_RedPhantom2.default)&&_RedPhantom2.default.onPacmanCollision(),this.collides(_PinkPhantom2.default)&&_PinkPhantom2.default.onPacmanCollision(),this.collides(_BluePhantom2.default)&&_BluePhantom2.default.onPacmanCollision(),this.collides(_OrangePhantom2.default)&&_OrangePhantom2.default.onPacmanCollision()},softReset:function(){this.x=_Pacman2.default.GLOBALS.maze.pacmanSpawn.x,this.y=_Pacman2.default.GLOBALS.maze.pacmanSpawn.y,this.xRounded=_Pacman2.default.GLOBALS.maze.pacmanSpawn.x,this.yRounded=_Pacman2.default.GLOBALS.maze.pacmanSpawn.y,this.direction=_Pacman2.default.GLOBALS.LEFT,this.nextDirection=_Pacman2.default.GLOBALS.LEFT}}});exports.default=PacmanEntity}]);